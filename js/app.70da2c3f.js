(function(e){function t(t){for(var r,i,o=t[0],c=t[1],u=t[2],l=0,m=[];l<o.length;l++)i=o[l],n[i]&&m.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function i(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"dbc2d5ba"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise(function(t,r){a=n[e]=[t,r]});t.push(a[2]=r);var s,c=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=i(e),s=function(t){u.onerror=u.onload=null,clearTimeout(l);var a=n[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+s+")");i.type=r,i.request=s,a[1](i)}n[e]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:u})},12e4);u.onerror=u.onload=s,c.appendChild(u)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://jcarolinaec.github.io/mapacultural/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var p=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"20c5":function(e,t,a){},"469d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"Application"},[a("map-header"),a("router-view")],1)},s=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("b-navbar",{staticClass:"Header",attrs:{toggleable:"md",type:"dark",variant:"info"}},[r("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),r("b-navbar-brand",{attrs:{href:"#"}},[r("picture",[r("img",{staticClass:"ImgBrand",attrs:{src:a("7559"),alt:"Logo"}})])]),r("b-navbar-nav",{staticClass:"SponsorsLogo",attrs:{right:""}},[r("picture",[r("img",{staticClass:"ImgSponsors",attrs:{src:a("615f"),alt:"Logo Sponsors"}})])]),r("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[r("b-navbar-nav",{staticClass:"Navigation-main"},[r("b-nav-item",{staticClass:"Navigation-mainItem Navigation-mainItemLink",attrs:{href:"#"}},[e._v("Lugares")]),r("b-nav-item",{staticClass:"Navigation-mainItem Navigation-mainItemLink",attrs:{href:"#"}},[e._v("Organizaciones")]),r("b-nav-item",{staticClass:"Navigation-mainItem Navigation-mainItemLink",attrs:{href:"#"}},[e._v("Personas")]),r("b-nav-item",{staticClass:"Navigation-mainItem Navigation-mainItemLink",attrs:{href:"#"}},[e._v("Circuitos")]),r("b-nav-item",{staticClass:"Navigation-mainItem Navigation-mainItemLink",attrs:{href:"#"}},[e._v("Densidades")])],1),r("b-navbar-nav",{staticClass:"ml-auto Navigation-second"},[r("b-nav-item",{staticClass:"Navigation-secondItem",attrs:{right:""}},[e._v(" Estadisticas\n        ")]),r("b-nav-item",{staticClass:"Navigation-secondItem",attrs:{right:""}},[e._v(" Documentos\n        ")]),r("b-nav-item",{staticClass:"Navigation-secondItem",attrs:{right:""}},[e._v(" Cronicas de Rutas\n        ")]),r("b-nav-item",{staticClass:"Navigation-secondItem",attrs:{right:""}},[e._v(" Directorio\n        ")])],1)],1)],1)],1)},o=[],c={name:"MapHeader"},u=c,l=(a("d06f"),a("2877")),p=Object(l["a"])(u,i,o,!1,null,null,null);p.options.__file="MapHeader.vue";var m=p.exports,d={name:"App",components:{MapHeader:m}},v=d,f=(a("5c0b"),Object(l["a"])(v,n,s,!1,null,null,null));f.options.__file="App.vue";var g=f.exports,b=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Main"},[a("cultural-map")],1)},C=[],y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CulturalMap"},[a("div",{staticClass:"CulturalMap-map",attrs:{id:"CulturalMap"}}),a("cultural-items-menu",{attrs:{map:this.map,markers:this.markers,items:this.grouped}})],1)},_=[],w=(a("7f7f"),a("6762"),a("28a5"),a("96cf"),a("1da1")),I=(a("a481"),a("ac6a"),a("456d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CulturalItemsMenu"},[a("div",{staticClass:"CulturalItemsMenu-searchContainer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"CulturalItemsMenu-search",attrs:{type:"text",placeholder:" Search"},domProps:{value:e.filter},on:{focus:function(t){e.isEditing=!0},blur:function(t){e.isEditing=!1},input:function(t){t.target.composing||(e.filter=t.target.value)}}})]),a("ul",{staticClass:"CulturalItemsMenu-items"},e._l(e.getValidItems(e.validItems),function(t,r){return a("li",{key:r,staticClass:"CulturalItemsMenu-item",class:{isExpanded:e.isExpanded(r)}},[a("div",{staticClass:"CulturalItemsMenu-itemContainer",on:{click:function(t){e.toggleExpanded(r)}}},[a("img",{staticClass:"CulturalItemsMenu-icon isBig",attrs:{src:e.getIcon(r),alt:r},on:{click:function(t){e.toggleCluster(r)}}}),a("input",{staticClass:"CulturalItemsMenu-categoryCheck",attrs:{type:"checkbox"}}),a("span",{staticClass:"CulturalItemsMenu-description"},[e._v("\n          "+e._s(r)+"\n        ")])]),a("div",[a("ul",{staticClass:"CulturalItemsMenu-submenu"},e._l(e.getValidCategories(t),function(t,n){return a("li",{key:n},[a("div",{staticClass:"CulturalItemsMenu-itemContainer",class:{isExpanded:e.isExpanded(r,n)},on:{click:function(t){e.toggleExpanded(r,n)}}},[a("img",{staticClass:"CulturalItemsMenu-icon",attrs:{src:e.getIcon(n),"data-icon":n,alt:n}}),a("span",{staticClass:"CulturalItemsMenu-description"},[e._v("\n                "+e._s(n)+"\n              ")])]),a("ul",{staticClass:"CulturalItemsMenu-itemsMenu",class:{isExpanded:e.isExpanded(r,n)}},e._l(e.getValidPlaces(t),function(t,r){return a("li",{key:r},[a("div",{staticClass:"CulturalItemsMenu-placeItem",on:{click:function(a){e.markerAction(t)}}},[a("img",{staticClass:"CulturalItemsMenu-icon",attrs:{src:e.getIcon(t.properties.icono,!0),alt:t.properties.nombre}}),a("span",{staticClass:"CulturalItemsMenu-placeText"},[e._v(e._s(t.properties.nombre))])])])}))])}))])])}))])}),x=[],k=a("be94"),M=(a("2fdb"),a("fb3a")),j=a.n(M);function L(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}var O={patrimonio:"patrimonio material.svg","patrimonio natural":"patrimonio natural.svg",artes:"artes visuales.svg","medios y contenidos":"literatura, publicaciones y prensa.svg","industrias creativas":"servicios creativos.svg","social y cívico":"gremiales y redes civicas.svg","servicios y lugares complementarios":"servicios gastronomicos.svg","patrimonio inmaterial y conocimiento tradicional":"patrimonio inmaterial.svg","patrimonio material e infraestructura cultural":"patrimonio material.svg","patrimonio natural e infraestructura ecosistémica":"patrimonio natural.svg","artes visuales":"artes visuales.svg","artes escénicas":"artes escenicas.svg","música":"musica.svg",musica:"musica.svg","literatura, publicaciones y prensa":"literatura, publicaciones y prensa.svg",audiovisual:"audiovisual.svg","media interactiva y nuevos medios":"media interactiva y nuevos medios.svg","servicios creativos":"servicios creativos.svg","diseño":"diseño.svg","artesanías":"artesanias.svg","grupos sociales, comunitarios o grupos poblacionales diferenciados ":"grupos sociales, comunitarios o grupos poblacionales diferenciados.svg","gremiales y redes cívicas":"gremiales y redes civicas.svg","centros educativos":"centros educativos.svg","servicios gastronómicos":"servicios gastronomicos.svg","entretenimiento y ocio nocturno":"entretenimiento y ocio nocturno.svg","deportes, aire libre y aventura":"deportes, aire libre y aventura.svg","servicios y operadores turísticos":"servicios y operadores turisticos.svg","salud y bienestar":"salud y bienestar.svg","centros religiosos":"centros religiosos.svg","de compras: espacios comerciales":"de compras_ espacios comerciales.svg","entidades gubernamentales y de servicios públicos":"entidades gubernamentales y de servicios publicos.svg","otros servicios e industrias no culturales, turísticos ni creativos":"otros servicios e industrias no culturales, turisticos ni creativos.svg","espacios urbanos":"espacios urbanos.svg"};function E(e){var t=O[e.toLowerCase()];return t||window.console.log("->",t,e),"SVG/".concat(t)}var N={name:"CulturalItemsMenu",props:["items","icons","map","markers"],data:function(){return{expandedItems:{},filter:"",isEditing:!1}},mounted:function(){this.prepareDragAndDrop()},computed:{validItems:function(){var e=this;return Object.keys(this.items).filter(function(e){return-1===e.indexOf("__")}).reduce(function(t,a){return t[a]=e.items[a],t},{})}},methods:{toggleCluster:function(e){window.console.log("name:",e)},isValidByFilter:function(e){return e.properties.nombre.toLowerCase().includes(this.filter.toLowerCase())},getValidPlaces:function(e){return e.filter(this.isValidByFilter)},getValidItems:function(e){var t=this,a=function(a){return Object.keys(t.getValidCategories(e[a])).length>0};return Object.keys(e).filter(a).reduce(this.elmsToObject(e),{})},elmsToObject:function(e){return function(t,a){return t[a]=e[a],t}},getValidCategories:function(e){var t=this,a=function(e,t){return"".concat(e).concat(t.properties.nombre,"\t")},r=function(r){return e[r].reduce(a,"").includes(t.filter)};return e?Object.keys(e).filter(r).reduce(this.elmsToObject(e),{}):[]},markerAction:function(e){var t=e.geometry.coordinates[1],a=e.geometry.coordinates[0],r=L(e.properties.area),n=e.properties.nombre,s="".concat(t,"_").concat(a,"_").concat(r,"_").concat(n).replace(/\s/g,"_"),i=this.markers[s.toLowerCase()],o={lat:t,lng:a};this.map.flyTo(o,18,{duration:.25,easeLinearity:1}),setTimeout(function(){i&&i.openPopup()},2e3)},getIcon:function(e,t){return t?e.replace("markers/","SVG/"):E(e)},toggleExpanded:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t.map(function(e){return e.replace(/\s/g,"_")}).join("_"),n=Object(k["a"])({},this.expandedItems);n[r]=!n[r],this.$set(this,"expandedItems",n)},isExpanded:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t.map(function(e){return e.replace(/\s/g,"_")}).join("_");return this.expandedItems[r]||""!==this.filter},prepareDragAndDrop:function(){j()(".CulturalItemsMenu").draggable({inertia:!0,autoScroll:!0,onmove:this.dragMoveListener,onend:function(e){var t=e.target.querySelector("p");t&&(t.textContent="moved a distance of "+Math.sqrt(Math.pow(e.pageX-e.x0,2)+Math.pow(e.pageY-e.y0,2)|0).toFixed(2)+"px")}})},dragMoveListener:function(e){var t=e.target,a=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,r=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+a+"px, "+r+"px)",t.setAttribute("data-x",a),t.setAttribute("data-y",r)}}},T=N,A=(a("9125"),Object(l["a"])(T,I,x,!1,null,null,null));A.options.__file="CulturalItemsMenu.vue";var S=A.exports,F={name:"CulturalMap",data:function(){return{map:null,grouped:{},clusters:{},markers:{}}},methods:{onEachFeature:function(e,t){var a=document.getElementById("popupMarkup").innerHTML,r=Object.keys(e.properties);if(r.length&&r.length>0){for(var n in e.properties)a=a.replace("value_".concat(n),e.properties[n]);t.bindPopup(a)}},getIcon:function(e,t){return t?e.replace("markers/","SVG/"):E(e)},loadFile:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a={features:[]},e.prev=1,r=window.baseUrl,r||(r=location.href.split("/#")[0]),e.next=6,fetch("".concat(r,"/data/").concat(t));case 6:if(n=e.sent,!(n.status>=200&&n.status<300)){e.next=11;break}return e.next=10,n.json();case 10:a=e.sent;case 11:e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](1);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),pointToLayer:function(e,t){var a=L(e.properties["nombre"]).trim(),r=L(e.properties["area"]).trim(),n=this.getIcon(e.properties.icono,!0),s=window.L.icon({iconUrl:n,iconSize:[40,40]}),i={};n&&s&&(i["icon"]=s);var o=window.L.marker(t,i);return this.markers["".concat(t.lat,"_").concat(t.lng,"_").concat(r,"_").concat(a).replace(/\s/g,"_").toLowerCase()]=o,o},makeGeoJson:function(e){var t=window.L.geoJSON(e,{onEachFeature:this.onEachFeature,pointToLayer:this.pointToLayer});return t},makeCluster:function(e){var t=new window.L.MarkerClusterGroup({showCoverageOnHover:!1,spiderfyDistanceMultiplier:1,spiderfyOnMaxZoom:!0,zoomToBoundsOnClick:!0});return this.clusters[L(e)]=t,t},toAreas:function(e,t){var a=t.features[0].properties.area;return e[a]||(e[a]=[]),e[a].push(t),e},processItemsForMenu:function(e){return e.reduce(function(e,t){var a=[];return t.features.forEach(function(t){var r=L(t.properties.area||"__undefined_area").trim(),n=L(t.properties.categoria||"__undefined_category").trim();e[r]||(e[r]={}),e[r][n]||(e[r][n]=[]);var s="".concat(t.properties.nombre).concat(t.geometry.coordinates.join("_"));a.includes(s)||(a.push(s),e[r][n].push(t))}),e},{})},loadFiles:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,a,r,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadFile("all.json");case 2:t=e.sent,a=t.reduce(this.toAreas,{}),r=Object.keys(a),{},r.forEach(function(e){var t=a[e],r=n.makeCluster(e),s=n.makeGeoJson(t);r.addLayer(s),r.addTo(n.map)}),this.grouped=this.processItemsForMenu(t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},mounted:function(){var e=[4.7906272149218285,-75.68756103515626];this.map=window.L.map("CulturalMap").setView(e,13),window.L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoib2dyYW5hZGEiLCJhIjoiY2puZ2ljYTg1MDNobjNrcGFlNndwOHR6ZiJ9.T4ym4ItHL-gaYd-uHmdeZQ",{maxZoom:18,attribution:"Jennifer Esguerra + Juliana Aguirre",id:"mapbox.streets"}).addTo(this.map),this.map.on("click",function(e){window.console.log({lat:e.latlng.lat,lng:e.latlng.lng})}),this.loadFiles()},components:{CulturalItemsMenu:S}},P=F,V=(a("ad3f"),Object(l["a"])(P,y,_,!1,null,null,null));V.options.__file="CulturalMap.vue";var H=V.exports,J={name:"home",components:{CulturalMap:H}},D=J,G=Object(l["a"])(D,h,C,!1,null,null,null);G.options.__file="Home.vue";var B=G.exports;r["a"].use(b["a"]);var $=new b["a"]({routes:[{path:"/",name:"home",component:B},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),R=a("9f7b");a("ab8b"),a("2dd8"),a("1f54");r["a"].config.productionTip=!1,r["a"].use(R["a"]),new r["a"]({router:$,render:function(e){return e(g)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var r=a("5e27"),n=a.n(r);n.a},"5e27":function(e,t,a){},"615f":function(e,t,a){e.exports=a.p+"img/logos-sponsors.e36cbc46.png"},7559:function(e,t,a){e.exports=a.p+"img/logo-mapa.7c6542f7.png"},9125:function(e,t,a){"use strict";var r=a("20c5"),n=a.n(r);n.a},ad3f:function(e,t,a){"use strict";var r=a("469d"),n=a.n(r);n.a},d06f:function(e,t,a){"use strict";var r=a("e482"),n=a.n(r);n.a},e482:function(e,t,a){}});
//# sourceMappingURL=app.70da2c3f.js.map